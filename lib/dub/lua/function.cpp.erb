<%= comment(@function) %>
<%= signature(@function) %> {
<% if @function.throws? -%>
  try {
<%= indent(body(@function, 'dub'), 4) %>
  } catch (std::exception &e) {
    lua_pushfstring(L, "<%= @function.id_name %>: %s", e.what());
  } catch (...) {
    lua_pushfstring(L, "<%= @function.id_name %>: Unknown exception");
  }
  return lua_error(L);
<% else -%>
<%= indent(body(@function, 'lua'), 2) %>
<% end -%>
}
